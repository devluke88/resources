# Basics

## Basic Commands



| # | Command                                                                                             | Description                                                                                                                                                                                                                                                                                                                                                                           |
| - | --------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1 | `docker build .`                                                                                    | Build the image from the Dockerfile found in the project directory                                                                                                                                                                                                                                                                                                                    |
| 2 | `docker run -p [port_no]:[port_no] [image_id]`                                                      | Run built docker image with `-p` flag (to publish, open port so we can reach from outside) and use image id, for example: `docker run -p 3000:3000 417916cb028c`                                                                                                                                                                                                                      |
| 3 | `docker ps`                                                                                         | List all the containers                                                                                                                                                                                                                                                                                                                                                               |
| 4 | `docker stop [container_name]`                                                                      | Stop given docker image, based on it's name, for example: `docker stop relaxed_andrew`                                                                                                                                                                                                                                                                                                |
| 5 | `docker run [image_from_hub]`                                                                       | This command will run local image, if note found it will pull it from DockerHub, e.g. `docker run node`                                                                                                                                                                                                                                                                               |
| 6 | `docker ps -a`                                                                                      | Show all processes (ps)                                                                                                                                                                                                                                                                                                                                                               |
| 7 | `docker run -it node`                                                                               | Access interactive section of Node instance, where you can run basic commands, node api, etc.                                                                                                                                                                                                                                                                                         |
| 8 | `docker run --help`                                                                                 | Shows all available option for command `docker run` and explains all available flags.                                                                                                                                                                                                                                                                                                 |
| 9 | `docker run -d -p 3000:80 --rm --name feedback-app -v feedback:/app/feedback feedback-node:volumes` | Run container in `-d` (detached mode), with `-p` on port 3000, `--rm` (remove container once stopped), `--name` (name it `feedback-app`) and attach the volume `/app/feedback`  that should be mapped to `feedback` with `-v` flag, lastly create it from tag (`feedback-node:volumes`). This command allow you to persist the data, even after container was removed and re-created. |

## Containers

| #  | Commmand                                                                                                     | Description                                                                                                                                                                                                                         |
| -- | ------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1  | `docker run -p 8000:80 -d [image_id]`                                                                        | Run container in the detached mode, this doesn't block your terminal so you can run different commands, but you can't see the output.                                                                                               |
| 2  | `docker attach [container_name]`                                                                             | You can switch on the attach mode, which will show you the p=output in the console, so you can see printed statments, etc. Example use: `docker attach determined_swartz`                                                           |
| 3  | `docker logs [container_name]`                                                                               | See the container's logs (you can see past logs), but stay in detached mode.                                                                                                                                                        |
| 4  | `docker logs -f [container_name]`                                                                            | See the logs and activate the attach mode (now you will be able to see the future logs).                                                                                                                                            |
| 5  | `docker start -a [container_name]`                                                                           | Start container in the attach mode (you can see output). Example use: `docker start -a determined_swartz`                                                                                                                           |
| 6  | `docker run -i -t [image_id]` or use `docker run -it [image_id]`                                             | Run container in interactive mode which allows STDIN, you can provide input to the terminal window.                                                                                                                                 |
| 7  | `docker start -a -i [container_name]`                                                                        | Start the container in attach mode and with option allowing to input data in terminal (I want to input something mode).                                                                                                             |
| 8  | `docker rm [container_name]`                                                                                 | Remove container that was previously stopped. You can pass multiple images names after rm, seperated by whitespace.                                                                                                                 |
| 9  | `docker cp [source_dir_path] [container_name]:`\[`path]`                                                     | Allows to copy file into and from the container. Example use: `docker cp dummy/. silly_ellis:/test` - if `/test` directory doesn't exist it will be created. Dot (.) in the command in a path means all files in a given directory. |
| 10 | `docker cp [container_name]:[path_to_file_or_folder_we_need] [local_folder]`                                 | Copy files from container to local folder, example use: `docker cp silly_ellis:/test dummy`                                                                                                                                         |
| 11 | `docker run -p [port]:[port] -d --rm --name [container_name] [image_id]`                                     | Name the container, example use: `docker run -p 3000:80 -d --rm --name goalsapp 7764ae198515`                                                                                                                                       |
| 12 | `docker run -p [local_port]:[docker_port] -d --rm --name [new_container_name] [image_repo_name]:[image_tag]` | <p>Run image based on name and tag, example use:<br><code>docker run -p 3000:80 -d --rm --name goalsapp goals:latest</code></p>                                                                                                     |

## Images

| #  | Command                                              | Description                                                                                                                                                                                                                             |
| -- | ---------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1  | `docker images`                                      | List all images.                                                                                                                                                                                                                        |
| 2  | `docker rmi [image_id]`                              | Remove image and all its layers. Remember that container needs to be remove first for this command to work. Example use: `docker rmi 430b0f5674df`                                                                                      |
| 3  | `docker image prune`                                 | Remove all unused images.                                                                                                                                                                                                               |
| 4  | `docker image prune -a`                              | Remove all images, including tagged images.                                                                                                                                                                                             |
| 5  | `docker run -p [port]:[port] -d --rm [image_id]`     | Run image on port 3000 in dettached mode and remove container when is being stopped. Example use: `docker run -p 3000:80 -d --rm 430b0f5674df`                                                                                          |
| 6  | `docker image inspect [image_id]`                    | It will output information about image in form of a json file.                                                                                                                                                                          |
| 7  | `docker build -t [name]:[tag] .`                     | <p>Tag the image with <code>-t</code> flag followed by <code>name:tag</code> (name is an image repo name, and tag is actual image name) - it can be a word or a number. Example use:<br><code>docker build -t goals:latest .</code></p> |
| 8  | `docker tag [old_image_name]:[tag] [new_image_name]` | Change the image name (it actually make a clone instead of changing name), for example: `docker tag node:latest rectan/hello-world`                                                                                                     |
| 9  | `docker login`                                       | Login to Docker Hub                                                                                                                                                                                                                     |
| 10 | `docker logout`                                      | Logout from Docker Hub                                                                                                                                                                                                                  |
| 11 | `docker push [repo_name]`                            | Push image to your repo in Docker Hub, for example: `docker push rectan/hello-world`                                                                                                                                                    |
| 12 | `docker pull [image_name]`                           | Pull images from Docker Hub (this will detch the latest image), for example: `docker pull rectan/hello-world`                                                                                                                           |

## Volumes

| # | Command                     | Description                     |
| - | --------------------------- | ------------------------------- |
| 1 | `docker volume rm VOL_NAME` | Remove a given volume.          |
| 2 | `docker volume prune`       | Remove all unused local volumes |
